flowchart TD
    %% 주요 구성 요소
    A[ThreadLocalLogTrace] -->|사용| B["ThreadLocal&lt;TraceId&gt;<br>traceIdHolder"]
    B -->|스레드별 저장소| C1[Thread 1의<br>TraceId 저장소]
    B -->|스레드별 저장소| C2[Thread 2의<br>TraceId 저장소]
    
    %% 주요 흐름 설명
    subgraph "메서드 호출 흐름"
        D1[begin 메서드]-->|1. 호출| D2[syncTraceId]
        D2-->|2. 레벨 증가| D3[TraceId 생성/증가]
        D3-->|3. 시작 로그 출력| D4[로그 출력]
        
        E1[end 메서드]-->|4. 호출| E2[complete]
        E2-->|5. 종료 로그 출력| E3[로그 출력]
        E3-->|6. 호출| E4[releaseTraceId]
        E4-->|7. 레벨 감소| E5[TraceId 감소/제거]
    end
    
    %% 주요 기능 설명
    subgraph "핵심 기능"
        F1["트랜잭션 ID<br>유지 관리"]
        F2["계층 구조<br>자동 관리"]
        F3["스레드 간<br>독립성 보장"]
        F4["메모리 누수<br>방지"]
    end
    
    %% 스타일 적용
    classDef primary fill:#f9f,stroke:#333,stroke-width:2px
    classDef secondary fill:#bbf,stroke:#333,stroke-width:1px
    classDef tertiary fill:#bfb,stroke:#333,stroke-width:1px
    
    class A primary
    class B,D1,E1 secondary
    class C1,C2,F1,F2,F3,F4 tertiary